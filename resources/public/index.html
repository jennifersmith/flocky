<!DOCTYPE html>
<html>
  <body>

  <script src="/jquery-1.7.1.min.js"></script>
  <script src="/d3.v2.min.js"></script>
  <script src="js/dev.js"></script>
  <script type="text/javascript">

    evilGlobalState = {};
    egs = evilGlobalState;

    window.initWorld = function(size){
    egs.fill = d3.scale.category20c();
    egs.scaleX = d3.scale.linear().domain([0, size]).range([0,1000]);
    egs.scaleY = d3.scale.linear().domain([0, size]).range([0,500]);

    d3.select("#container").select("svg").remove();
    egs.vis =  d3.select("#container").append("svg")
    .attr("width", 1000)
    .attr("height", 500)
    .attr("class", "stuff")
    .attr("style", "border: 1px green solid; background-color:black");
    

    };

    drawBirds = function(birds) {

    var node = egs.vis.selectAll("g.node")
    .data(birds)
    .attr("transform", function(d) { return "translate(" + egs.scaleX(d.coords[0]) + "," + egs.scaleY(d.coords[1]) + ")"; })
    .enter().append("g")
    .attr("class", "node");

    node.append("rect")
    .attr("width", function(d) { return egs.scaleX(5); })
    .attr("height", function(d) { return egs.scaleX(10); })
    .attr("transform", function(d) { return "rotate("+ (360 - (d.heading/Math.PI * 180)) +")"; })
    .style("fill", function(d, i) { return egs.fill(i); });
    }
    
    makeBird = function(id,x,y){
       var bird = {};
       bird.x = x;
       bird.y = y;
       bird.r = 3;
       bird.id = id;
       return bird;
    }
    fakeBirds = function(){
        var birds = [makeBird("bob", 10,10), makeBird("frank", 50,50)];

    return birds;

    };
  </script>
  <div id="container"></div>
  <canvas>
    <g>
      </g>
  </canvas>
  </body>
</html>
